<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Red Plag: Backend</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Red Plag
   </div>
   <div id="projectbrief">An application to effectively detect plagiarism in source code files in the academic arena</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Backend </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_backendREADME"></a> This folder contains the implementation for the backend API for the RedPlag webapp. The framework used for this implementation is Django REST framework on top of the Django framework. It provides API for registration and authentication of users as well as updation of passwords. It also provides an API to perform CRUD operations on batches of sources code files.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
API</h1>
<p>The API consists of two major parts -:</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Authentication API</h2>
<p>This API provides endpoints for session as well token authentication to authenticate users The routes offered by the API are :</p>
<div class="fragment"><div class="line"># The base path is /auth</div>
<div class="line">router = DefaultRouter()</div>
<div class="line">router.register(r&#39;orgs&#39;,views.OrganisationViewSet,basename=&#39;organisation&#39;)</div>
<div class="line"> </div>
<div class="line">urlpatterns = [</div>
<div class="line">    path(&#39;&#39;,include(router.urls)),</div>
<div class="line">    path(&#39;register/&#39;, RegisterView.as_view()),</div>
<div class="line">    path(&#39;login/&#39;, LoginView.as_view()),</div>
<div class="line">    path(&#39;profile/&#39;,ProfileView.as_view()),</div>
<div class="line">    path(&#39;logout/&#39;,LogoutView.as_view()),</div>
<div class="line">    path(&#39;changepassword/&#39;,ChangePasswordView.as_view()),</div>
<div class="line">    path(&#39;token/&#39;,CustomAuthToken.as_view()),</div>
<div class="line">    path(&#39;token-logout/&#39;,TokenLogoutView.as_view())</div>
<div class="line">] </div>
</div><!-- fragment --><ul>
<li>Register</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/register   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">Registraion of new users   </td></tr>
</table>
<p><br  />
This is the request</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Datatype   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">username   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Username for loggin in (unique)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">first_name   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">First name of user    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">last_name   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Last name of user    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">email   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">User's email address    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">password   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Login Password    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">org_pass   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Passcode of a registered organisation   </td></tr>
</table>
<p><br  />
This is the request body in JSON</p>
<ul>
<li>Login</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/login   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">Login into your account   </td></tr>
</table>
<p><br  />
This is the request</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Datatype   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">username   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Username    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">password   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Login Password    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">org_pass   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Passcode of user's organisation   </td></tr>
</table>
<p><br  />
This is the request body in JSON</p>
<ul>
<li>Logout</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/logout   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Logout your session   </td></tr>
</table>
<p><br  />
This is the request <br  />
This request does not have search parameters but must be sent with session headers</p>
<ul>
<li>Profile</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/profile   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">Return's the current user's data   </td></tr>
</table>
<p><br  />
This is the request <br  />
This request does not have search parameters but must be sent with session headers. <br  />
Return' user data in JSON format</p>
<ul>
<li>Change password</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/changepassword   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">Change the current user's password   </td></tr>
</table>
<p><br  />
This is the request</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Datatype   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">old_password   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Current Password    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">new_password   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">New password   </td></tr>
</table>
<p><br  />
This is the request body in JSON. This nust also be sent with user session headers</p>
<ul>
<li>Token</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/token   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">Get the user's token   </td></tr>
</table>
<p><br  />
This is the request</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Datatype   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">username   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Username    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">password   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Login Password    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">org_pass   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Passcode of user's organisation   </td></tr>
</table>
<p><br  />
This is the request body in JSON.. Return a token for authentication on other views</p>
<ul>
<li>LogoutToken</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/token-logout   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">Delete the user's token if present   </td></tr>
</table>
<p><br  />
This is the request <br  />
This request does not have any params. Returns a JSON response with success message</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Batch API</h2>
<p>This API handles operations on batches of source code files submitted for evaluation The routes offered by the API are :</p>
<div class="fragment"><div class="line"># The base path is /rp</div>
<div class="line">router = DefaultRouter()</div>
<div class="line">router.register(r&#39;batch&#39;, BatchViewSet,basename=&#39;batch&#39;)</div>
<div class="line"> </div>
<div class="line">urlpatterns = [</div>
<div class="line">    path(&#39;&#39;,include(router.urls)),</div>
<div class="line">    path(&#39;download/&lt;uuid:id&gt;&#39;,DownloadResult.as_view()),</div>
<div class="line">] </div>
</div><!-- fragment --><ul>
<li>List Batch</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/batch/:uid(optional)   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Returns a list of users batches or a particular batch with ID=uid   </td></tr>
</table>
<p><br  />
This is the request <br  />
It returns JSON response with information about the current user's batches</p>
<ul>
<li>Create Batch</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/batch   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">Create a new batch for the current user   </td></tr>
</table>
<p><br  />
This is the request</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Datatype   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">name   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Name of the batch    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">description   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Short description for the batch    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">language   </td><td class="markdownTableBodyNone">["C++","Python","Other"]   </td><td class="markdownTableBodyNone">Language used in code files    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">inline_comment   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Character(s) to start an inline comment    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">multi_begin   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Character(s) to start a multiline comment    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">multi_end   </td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Character(s) to end a multiline comment    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">files   </td><td class="markdownTableBodyNone">File[]   </td><td class="markdownTableBodyNone">List of files to be uploaded   </td></tr>
</table>
<p><br  />
This is the request body in <em><b>multipart/form-data</b></em></p>
<ul>
<li>Delete Batch</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/batch/:uid   </td><td class="markdownTableBodyNone">DELETE   </td><td class="markdownTableBodyNone">Deletes the batch with ID=uid   </td></tr>
</table>
<p><br  />
This is the request <br  />
Can only destroy the request's user's batches.Returns a success or failure message accordingly.</p>
<ul>
<li>Download Result</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Route   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/download/:uid   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Returns a file containing results of plagiarism check on the specified batch   </td></tr>
</table>
<p><br  />
This is the request <br  />
This must also be sent with session or token headers. It return a File response.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Usage</h1>
<p>Clone the repository, navigate into the project diectory and run the following commands</p>
<div class="fragment"><div class="line">$ cd Backend</div>
<div class="line">$ pip install -r requirements.txt</div>
<div class="line">$ python3 manage.py makemigrations</div>
<div class="line">$ python3 manage.py migrate</div>
<div class="line">$ python3 manage.py runserver </div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
